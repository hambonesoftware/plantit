<!doctype html>
<html lang="en" data-boot="t0">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>PlantIT SafeBoot</title>
    <style>
      :root {
        color-scheme: light dark;
      }
      body {
        margin: 0;
        min-height: 100vh;
        display: grid;
        place-items: center;
        background: radial-gradient(circle at top, #f0f4ff, #dfe9f3);
        font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      }
      main {
        text-align: center;
        padding: 2rem;
        border-radius: 1.5rem;
        background: rgba(255, 255, 255, 0.8);
        box-shadow: 0 1.5rem 3rem rgba(0, 0, 0, 0.1);
        backdrop-filter: blur(12px);
      }
      h1 {
        margin: 0 0 1rem;
        letter-spacing: 0.2em;
        font-size: clamp(2rem, 5vw, 3rem);
        color: #1a4d2e;
      }
      .actions {
        display: flex;
        gap: 1rem;
        justify-content: center;
        flex-wrap: wrap;
        margin-bottom: 1rem;
      }
      button {
        padding: 0.75rem 1.25rem;
        border: none;
        border-radius: 999px;
        background: #1a4d2e;
        color: #fff;
        font-size: 1rem;
        cursor: pointer;
        transition: transform 0.2s ease, box-shadow 0.2s ease;
      }
      button:active {
        transform: scale(0.97);
        box-shadow: inset 0 0.5rem 1rem rgba(0, 0, 0, 0.15);
      }
      #log {
        text-align: left;
        background: rgba(26, 77, 46, 0.1);
        padding: 1rem;
        border-radius: 0.75rem;
        max-width: 26rem;
        margin: 0 auto;
        font-size: 0.9rem;
        line-height: 1.4;
        white-space: pre-wrap;
      }
    </style>
    <script>
      (function purgeSW() {
        if (!location.search.includes('no-sw=1')) {
          return;
        }
        if (!('serviceWorker' in navigator)) {
          return;
        }
        navigator.serviceWorker
          .getRegistrations()
          .then(function (regs) {
            return Promise.all(
              regs.map(function (reg) {
                return reg.unregister();
              })
            );
          })
          .then(function () {
            if (window.caches) {
              return caches.keys().then(function (keys) {
                return Promise.all(keys.map(function (key) {
                  return caches.delete(key);
                }));
              });
            }
          })
          .finally(function () {
            if (!sessionStorage.getItem('sw-purge')) {
              sessionStorage.setItem('sw-purge', '1');
              const url = new URL(location.href);
              url.searchParams.delete('no-sw');
              location.replace(url.toString());
            }
          });
      })();
    </script>
  </head>
  <body>
    <main>
      <h1 id="paint-probe">SAFEBOOT OK</h1>
      <p>Initial paint confirmed. Use the buttons below to verify API wiring.</p>
      <div class="actions">
        <button id="ping" type="button">Ping /api/health</button>
        <button id="echo" type="button">Echo</button>
      </div>
      <pre id="log">Bootingâ€¦</pre>
    </main>
    <script type="module" src="/app.js"></script>
  </body>
</html>
